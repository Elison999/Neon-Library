--[[ 
    NEON UI LIBRARY (CORRIGIDA - ELEMENTOS VISÍVEIS)
    Fix: Substituído Folder por Frame para renderizar os elementos.
    Fix: Adicionado AutomaticCanvasSize para o scroll funcionar.
]]

local UserInputService = game:GetService("UserInputService")
local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")
local CoreGui = game:GetService("CoreGui")

local Library = {}

--// Funções Utilitárias
local function MakeDraggable(topbarobject, object)
    local Dragging = nil
    local DragInput = nil
    local DragStart = nil
    local StartPosition = nil

    topbarobject.Active = true 

    local function Update(input)
        local Delta = input.Position - DragStart
        local pos = UDim2.new(
            StartPosition.X.Scale, 
            StartPosition.X.Offset + Delta.X, 
            StartPosition.Y.Scale, 
            StartPosition.Y.Offset + Delta.Y
        )
        local Tween = TweenService:Create(object, TweenInfo.new(0.15), {Position = pos})
        Tween:Play()
    end

    topbarobject.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
            Dragging = true
            DragStart = input.Position
            StartPosition = object.Position

            input.Changed:Connect(function()
                if input.UserInputState == Enum.UserInputState.End then
                    Dragging = false
                end
            end)
        end
    end)

    topbarobject.InputChanged:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
            DragInput = input
        end
    end)

    UserInputService.InputChanged:Connect(function(input)
        if input == DragInput and Dragging then
            Update(input)
        end
    end)
end

local function CreateTween(obj, props, time)
    local info = TweenInfo.new(time or 0.3, Enum.EasingStyle.Quart, Enum.EasingDirection.Out)
    local tween = TweenService:Create(obj, info, props)
    tween:Play()
    return tween
end

local function ProtectGui(gui)
    if syn and syn.protect_gui then
        syn.protect_gui(gui)
        gui.Parent = CoreGui
    elseif gethui then
        gui.Parent = gethui()
    else
        gui.Parent = CoreGui
    end
end

--// Lógica Principal
function Library:CreateWindow(Config)
    local Title = Config.Name or "Library"
    local KeySystemConfig = {
        Enabled = Config.KeySystem or false,
        Key = Config.Key or "",
        KeyName = Config.KeyName or "Key System",
        GrabKeyFromSite = Config.GrabKeyFromSite or false,
        KeySite = Config.KeySite or ""
    }

    local TitanUI = Instance.new("ScreenGui")
    TitanUI.Name = "NeonUI_" .. math.random(1, 10000)
    TitanUI.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
    ProtectGui(TitanUI)

    -- Container de Notificações
    local NotifContainer = Instance.new("Frame")
    NotifContainer.Name = "NotifContainer"
    NotifContainer.Parent = TitanUI
    NotifContainer.AnchorPoint = Vector2.new(1, 1)
    NotifContainer.Position = UDim2.new(0.98, 0, 0.98, 0)
    NotifContainer.Size = UDim2.new(0, 300, 0, 500)
    NotifContainer.BackgroundTransparency = 1

    local NotifListLayout = Instance.new("UIListLayout")
    NotifListLayout.Parent = NotifContainer
    NotifListLayout.SortOrder = Enum.SortOrder.LayoutOrder
    NotifListLayout.VerticalAlignment = Enum.VerticalAlignment.Bottom
    NotifListLayout.Padding = UDim.new(0, 5)

    function Library:Notification(options)
        local Title = options.Title or "Notification"
        local Content = options.Content or ""
        local Duration = options.Duration or 3

        local NotifFrame = Instance.new("Frame")
        NotifFrame.Parent = NotifContainer
        NotifFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
        NotifFrame.Size = UDim2.new(1, 0, 0, 0)
        NotifFrame.ClipsDescendants = true
        
        local NC = Instance.new("UICorner")
        NC.CornerRadius = UDim.new(0, 6)
        NC.Parent = NotifFrame
        
        local NS = Instance.new("UIStroke")
        NS.Color = Color3.fromRGB(60,60,60)
        NS.Parent = NotifFrame

        local NT = Instance.new("TextLabel")
        NT.Parent = NotifFrame
        NT.BackgroundTransparency = 1
        NT.Position = UDim2.new(0, 10, 0, 5)
        NT.Size = UDim2.new(1, -20, 0, 20)
        NT.Font = Enum.Font.GothamBold
        NT.Text = Title
        NT.TextColor3 = Color3.fromRGB(255, 255, 255)
        NT.TextSize = 14
        NT.TextXAlignment = Enum.TextXAlignment.Left

        local ND = Instance.new("TextLabel")
        ND.Parent = NotifFrame
        ND.BackgroundTransparency = 1
        ND.Position = UDim2.new(0, 10, 0, 25)
        ND.Size = UDim2.new(1, -20, 0, 35)
        ND.Font = Enum.Font.Gotham
        ND.Text = Content
        ND.TextColor3 = Color3.fromRGB(200, 200, 200)
        ND.TextSize = 12
        ND.TextWrapped = true
        ND.TextXAlignment = Enum.TextXAlignment.Left

        CreateTween(NotifFrame, {Size = UDim2.new(1, 0, 0, 70)}, 0.3)

        task.delay(Duration, function()
            local out = CreateTween(NotifFrame, {Size = UDim2.new(1, 0, 0, 0), BackgroundTransparency = 1}, 0.3)
            CreateTween(NT, {TextTransparency = 1}, 0.2)
            CreateTween(ND, {TextTransparency = 1}, 0.2)
            CreateTween(NS, {Transparency = 1}, 0.2)
            out.Completed:Connect(function() NotifFrame:Destroy() end)
        end)
    end

    -- // BOTÃO DE ABRIR (TOGGLE ICON) //
    local OpenBtnFrame = Instance.new("ImageButton")
    OpenBtnFrame.Name = "OpenButton"
    OpenBtnFrame.Parent = TitanUI
    OpenBtnFrame.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
    OpenBtnFrame.Position = UDim2.new(0.05, 0, 0.1, 0)
    OpenBtnFrame.Size = UDim2.new(0, 50, 0, 50)
    OpenBtnFrame.Visible = false 
    OpenBtnFrame.Active = true
    
    local OBCorner = Instance.new("UICorner")
    OBCorner.CornerRadius = UDim.new(0, 12)
    OBCorner.Parent = OpenBtnFrame
    
    local OBStroke = Instance.new("UIStroke")
    OBStroke.Color = Color3.fromRGB(60,60,60)
    OBStroke.Parent = OpenBtnFrame

    local OBIcon = Instance.new("ImageLabel")
    OBIcon.Parent = OpenBtnFrame
    OBIcon.BackgroundTransparency = 1
    OBIcon.Size = UDim2.new(0, 30, 0, 30)
    OBIcon.Position = UDim2.new(0.5, -15, 0.5, -15)
    OBIcon.Image = "rbxassetid://6031091004" 

    MakeDraggable(OpenBtnFrame, OpenBtnFrame) 

    -- // CRIAR JANELA PRINCIPAL //
    local MainFrame = Instance.new("Frame")
    MainFrame.Name = "MainFrame"
    MainFrame.Parent = TitanUI
    MainFrame.AnchorPoint = Vector2.new(0.5, 0.5)
    MainFrame.Position = UDim2.new(0.5, 0, 0.5, 0)
    MainFrame.Size = UDim2.new(0, 550, 0, 350)
    MainFrame.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
    MainFrame.ClipsDescendants = true
    MainFrame.Visible = not KeySystemConfig.Enabled

    if KeySystemConfig.Enabled then
        MainFrame.Size = UDim2.new(0,0,0,0)
    end

    local MainCorner = Instance.new("UICorner")
    MainCorner.CornerRadius = UDim.new(0, 8)
    MainCorner.Parent = MainFrame

    local MainStroke = Instance.new("UIStroke")
    MainStroke.Color = Color3.fromRGB(50, 50, 50)
    MainStroke.Parent = MainFrame

    -- // TOPBAR //
    local Topbar = Instance.new("Frame")
    Topbar.Name = "Topbar"
    Topbar.Parent = MainFrame
    Topbar.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
    Topbar.Size = UDim2.new(1, 0, 0, 40)
    
    local TopCorner = Instance.new("UICorner")
    TopCorner.CornerRadius = UDim.new(0, 8)
    TopCorner.Parent = Topbar

    local FixB = Instance.new("Frame")
    FixB.Parent = Topbar
    FixB.BorderSizePixel = 0
    FixB.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
    FixB.Position = UDim2.new(0,0,1,-5)
    FixB.Size = UDim2.new(1,0,0,5)

    local TitleLbl = Instance.new("TextLabel")
    TitleLbl.Parent = Topbar
    TitleLbl.BackgroundTransparency = 1
    TitleLbl.Position = UDim2.new(0, 15, 0, 0)
    TitleLbl.Size = UDim2.new(0.5, 0, 1, 0)
    TitleLbl.Font = Enum.Font.GothamBold
    TitleLbl.Text = Title
    TitleLbl.TextColor3 = Color3.fromRGB(255, 255, 255)
    TitleLbl.TextSize = 14
    TitleLbl.TextXAlignment = Enum.TextXAlignment.Left

    local CloseBtn = Instance.new("ImageButton")
    CloseBtn.Parent = Topbar
    CloseBtn.BackgroundTransparency = 1
    CloseBtn.Position = UDim2.new(1, -35, 0, 5)
    CloseBtn.Size = UDim2.new(0, 30, 0, 30)
    CloseBtn.Image = "rbxassetid://6031094678" 
    CloseBtn.ImageColor3 = Color3.fromRGB(200, 200, 200)

    -- // SISTEMA DE TOGGLE //
    Library.IsOpen = true
    
    function Library:Toggle()
        Library.IsOpen = not Library.IsOpen
        
        if Library.IsOpen then
            OpenBtnFrame.Visible = false
            MainFrame.Visible = true
            CreateTween(MainFrame, {Size = UDim2.new(0, 550, 0, 350)}, 0.3)
        else
            local close = CreateTween(MainFrame, {Size = UDim2.new(0, 0, 0, 0)}, 0.3)
            close.Completed:Connect(function()
                if not Library.IsOpen then 
                    MainFrame.Visible = false 
                    OpenBtnFrame.Visible = true 
                end
            end)
        end
    end

    CloseBtn.MouseButton1Click:Connect(function()
        Library:Toggle()
    end)

    OpenBtnFrame.MouseButton1Click:Connect(function()
        Library:Toggle()
    end)

    MakeDraggable(Topbar, MainFrame)

    -- // CONTEÚDO DAS ABAS //
    local TabContainer = Instance.new("ScrollingFrame")
    TabContainer.Parent = MainFrame
    TabContainer.BackgroundTransparency = 1
    TabContainer.Position = UDim2.new(0, 10, 0, 50)
    TabContainer.Size = UDim2.new(0, 130, 1, -60)
    TabContainer.ScrollBarThickness = 2
    
    local TabList = Instance.new("UIListLayout")
    TabList.Parent = TabContainer
    TabList.SortOrder = Enum.SortOrder.LayoutOrder
    TabList.Padding = UDim.new(0, 5)

    local Divider = Instance.new("Frame")
    Divider.Parent = MainFrame
    Divider.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
    Divider.BorderSizePixel = 0
    Divider.Position = UDim2.new(0, 150, 0, 50)
    Divider.Size = UDim2.new(0, 1, 1, -60)

    local PageContainer = Instance.new("Frame")
    PageContainer.Parent = MainFrame
    PageContainer.BackgroundTransparency = 1
    PageContainer.Position = UDim2.new(0, 160, 0, 50)
    PageContainer.Size = UDim2.new(1, -170, 1, -60)
    PageContainer.ClipsDescendants = true

    -- FIX: Usar Frame em vez de Folder, pois Folders não renderizam UI
    local PagesFolder = Instance.new("Frame")
    PagesFolder.Name = "Pages"
    PagesFolder.Parent = PageContainer
    PagesFolder.BackgroundTransparency = 1
    PagesFolder.Size = UDim2.new(1,0,1,0)

    -- // SISTEMA DE KEY //
    if KeySystemConfig.Enabled then
        local KeyFrame = Instance.new("Frame")
        KeyFrame.Parent = TitanUI
        KeyFrame.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
        KeyFrame.Position = UDim2.new(0.5, 0, 0.5, 0)
        KeyFrame.AnchorPoint = Vector2.new(0.5, 0.5)
        KeyFrame.Size = UDim2.new(0, 400, 0, 250)
        KeyFrame.ClipsDescendants = true
        
        local KC = Instance.new("UICorner")
        KC.CornerRadius = UDim.new(0, 10)
        KC.Parent = KeyFrame
        local KS = Instance.new("UIStroke")
        KS.Color = Color3.fromRGB(60,60,60)
        KS.Parent = KeyFrame

        local KTitle = Instance.new("TextLabel")
        KTitle.Parent = KeyFrame
        KTitle.BackgroundTransparency = 1
        KTitle.Position = UDim2.new(0,0,0,15)
        KTitle.Size = UDim2.new(1,0,0,30)
        KTitle.Font = Enum.Font.GothamBold
        KTitle.Text = KeySystemConfig.KeyName
        KTitle.TextColor3 = Color3.fromRGB(255,255,255)
        KTitle.TextSize = 20

        local KInput = Instance.new("TextBox")
        KInput.Parent = KeyFrame
        KInput.BackgroundColor3 = Color3.fromRGB(35,35,35)
        KInput.Position = UDim2.new(0.1,0,0.4,0)
        KInput.Size = UDim2.new(0.8,0,0,40)
        KInput.Font = Enum.Font.Gotham
        KInput.PlaceholderText = "Enter Key..."
        KInput.Text = ""
        KInput.TextColor3 = Color3.fromRGB(255,255,255)
        KInput.TextSize = 14
        local KIC = Instance.new("UICorner")
        KIC.Parent = KInput

        local KBtn = Instance.new("TextButton")
        KBtn.Parent = KeyFrame
        KBtn.BackgroundColor3 = Color3.fromRGB(45,45,45)
        KBtn.Position = UDim2.new(0.1,0,0.65,0)
        KBtn.Size = UDim2.new(0.35,0,0,35)
        KBtn.Font = Enum.Font.GothamBold
        KBtn.Text = "Check Key"
        KBtn.TextColor3 = Color3.fromRGB(255,255,255)
        KBtn.TextSize = 14
        local KBC = Instance.new("UICorner")
        KBC.Parent = KBtn

        local KLink = Instance.new("TextButton")
        KLink.Parent = KeyFrame
        KLink.BackgroundColor3 = Color3.fromRGB(45,45,45)
        KLink.Position = UDim2.new(0.55,0,0.65,0)
        KLink.Size = UDim2.new(0.35,0,0,35)
        KLink.Font = Enum.Font.GothamBold
        KLink.Text = "Get Key"
        KLink.TextColor3 = Color3.fromRGB(255,255,255)
        KLink.TextSize = 14
        local KLC = Instance.new("UICorner")
        KLC.Parent = KLink

        MakeDraggable(KeyFrame, KeyFrame)

        KLink.MouseButton1Click:Connect(function()
            if setclipboard then
                setclipboard(KeySystemConfig.KeySite)
                Library:Notification({Title = "Key", Content = "Link copied!"})
            end
        end)

        KBtn.MouseButton1Click:Connect(function()
            local Input = KInput.Text
            local RealKey = KeySystemConfig.Key
            if KeySystemConfig.GrabKeyFromSite then
                pcall(function()
                    RealKey = game:HttpGet(KeySystemConfig.KeySite):gsub("\n",""):gsub(" ","")
                end)
            end

            if Input == RealKey then
                Library:Notification({Title = "Success", Content = "Key Verified!"})
                CreateTween(KeyFrame, {Size = UDim2.new(0,0,0,0)}, 0.3).Completed:Connect(function()
                    KeyFrame:Visible(false)
                    -- ABRE A JANELA
                    MainFrame.Visible = true
                    CreateTween(MainFrame, {Size = UDim2.new(0, 550, 0, 350)}, 0.4)
                end)
            else
                Library:Notification({Title = "Error", Content = "Incorrect Key!"})
            end
        end)
    else
        CreateTween(MainFrame, {Size = UDim2.new(0, 550, 0, 350)}, 0.4)
    end

    --// MÉTODOS DE ABA E ELEMENTOS
    local Window = {}

    function Window:Tab(name)
        local Tab = {}
        
        local TabBtn = Instance.new("TextButton")
        TabBtn.Parent = TabContainer
        TabBtn.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
        TabBtn.BackgroundTransparency = 1
        TabBtn.Size = UDim2.new(1, 0, 0, 30)
        TabBtn.Font = Enum.Font.GothamMedium
        TabBtn.Text = name
        TabBtn.TextColor3 = Color3.fromRGB(150, 150, 150)
        TabBtn.TextSize = 14
        local TC = Instance.new("UICorner")
        TC.Parent = TabBtn

        local Page = Instance.new("ScrollingFrame")
        Page.Name = name
        Page.Parent = PagesFolder -- Agora PagesFolder é um Frame, então renderiza.
        Page.BackgroundTransparency = 1
        Page.Size = UDim2.new(1, 0, 1, 0)
        Page.ScrollBarThickness = 2
        Page.Visible = false
        Page.AutomaticCanvasSize = Enum.AutomaticSize.Y -- Importante para scrollar
        
        local PL = Instance.new("UIListLayout")
        PL.Parent = Page
        PL.SortOrder = Enum.SortOrder.LayoutOrder
        PL.Padding = UDim.new(0, 5)
        local PP = Instance.new("UIPadding")
        PP.Parent = Page
        PP.PaddingTop = UDim.new(0,5)
        PP.PaddingLeft = UDim.new(0,5)
        PP.PaddingRight = UDim.new(0,5)

        TabBtn.MouseButton1Click:Connect(function()
            for _,v in pairs(TabContainer:GetChildren()) do
                if v:IsA("TextButton") then
                    CreateTween(v, {BackgroundTransparency = 1, TextColor3 = Color3.fromRGB(150,150,150)}, 0.2)
                end
            end
            for _,v in pairs(PagesFolder:GetChildren()) do 
                if v:IsA("ScrollingFrame") then v.Visible = false end 
            end
            
            CreateTween(TabBtn, {BackgroundTransparency = 0.9, TextColor3 = Color3.fromRGB(255,255,255)}, 0.2)
            Page.Visible = true
        end)

        -- Verifica se é a primeira aba para mostrá-la
        if #PagesFolder:GetChildren() == 1 then
            CreateTween(TabBtn, {BackgroundTransparency = 0.9, TextColor3 = Color3.fromRGB(255,255,255)}, 0.2)
            Page.Visible = true
        end

        function Tab:Button(text, callback)
            local Btn = Instance.new("Frame")
            Btn.Parent = Page
            Btn.BackgroundColor3 = Color3.fromRGB(40,40,40)
            Btn.Size = UDim2.new(1,0,0,36)
            local BC = Instance.new("UICorner")
            BC.Parent = Btn
            
            local BT = Instance.new("TextButton")
            BT.Parent = Btn
            BT.BackgroundTransparency = 1
            BT.Size = UDim2.new(1,0,1,0)
            BT.Font = Enum.Font.Gotham
            BT.Text = text
            BT.TextColor3 = Color3.fromRGB(255,255,255)
            BT.TextSize = 14
            
            BT.MouseButton1Click:Connect(function()
                CreateTween(Btn, {BackgroundColor3 = Color3.fromRGB(60,60,60)}, 0.1)
                task.wait(0.1)
                CreateTween(Btn, {BackgroundColor3 = Color3.fromRGB(40,40,40)}, 0.1)
                pcall(callback)
            end)
        end

        function Tab:Toggle(text, default, callback)
            local Toggled = default or false
            local TFr = Instance.new("Frame")
            TFr.Parent = Page
            TFr.BackgroundColor3 = Color3.fromRGB(40,40,40)
            TFr.Size = UDim2.new(1,0,0,36)
            local TC = Instance.new("UICorner")
            TC.Parent = TFr
            
            local TL = Instance.new("TextLabel")
            TL.Parent = TFr
            TL.BackgroundTransparency = 1
            TL.Position = UDim2.new(0,10,0,0)
            TL.Size = UDim2.new(0.7,0,1,0)
            TL.Font = Enum.Font.Gotham
            TL.Text = text
            TL.TextColor3 = Color3.fromRGB(255,255,255)
            TL.TextSize = 14
            TL.TextXAlignment = Enum.TextXAlignment.Left
            
            local SB = Instance.new("Frame")
            SB.Parent = TFr
            SB.BackgroundColor3 = Toggled and Color3.fromRGB(0,200,100) or Color3.fromRGB(60,60,60)
            SB.Position = UDim2.new(1,-50,0.5,-10)
            SB.Size = UDim2.new(0,40,0,20)
            local SC = Instance.new("UICorner")
            SC.CornerRadius = UDim.new(1,0)
            SC.Parent = SB
            
            local Dot = Instance.new("Frame")
            Dot.Parent = SB
            Dot.BackgroundColor3 = Color3.fromRGB(255,255,255)
            Dot.Position = Toggled and UDim2.new(1,-18,0.5,-8) or UDim2.new(0,2,0.5,-8)
            Dot.Size = UDim2.new(0,16,0,16)
            local DC = Instance.new("UICorner")
            DC.CornerRadius = UDim.new(1,0)
            DC.Parent = Dot
            
            local Btn = Instance.new("TextButton")
            Btn.Parent = TFr
            Btn.BackgroundTransparency = 1
            Btn.Size = UDim2.new(1,0,1,0)
            Btn.Text = ""
            
            Btn.MouseButton1Click:Connect(function()
                Toggled = not Toggled
                CreateTween(SB, {BackgroundColor3 = Toggled and Color3.fromRGB(0,200,100) or Color3.fromRGB(60,60,60)}, 0.2)
                CreateTween(Dot, {Position = Toggled and UDim2.new(1,-18,0.5,-8) or UDim2.new(0,2,0.5,-8)}, 0.2)
                pcall(callback, Toggled)
            end)
        end

        function Tab:Slider(text, min, max, default, callback)
            local val = default or min
            local sliding = false
            
            local SFr = Instance.new("Frame")
            SFr.Parent = Page
            SFr.BackgroundColor3 = Color3.fromRGB(40,40,40)
            SFr.Size = UDim2.new(1,0,0,50)
            local SC = Instance.new("UICorner")
            SC.Parent = SFr
            
            local SL = Instance.new("TextLabel")
            SL.Parent = SFr
            SL.BackgroundTransparency = 1
            SL.Position = UDim2.new(0,10,0,5)
            SL.Size = UDim2.new(1,-20,0,20)
            SL.Font = Enum.Font.Gotham
            SL.Text = text
            SL.TextColor3 = Color3.fromRGB(255,255,255)
            SL.TextSize = 14
            SL.TextXAlignment = Enum.TextXAlignment.Left
            
            local VL = Instance.new("TextLabel")
            VL.Parent = SFr
            VL.BackgroundTransparency = 1
            VL.Position = UDim2.new(1,-60,0,5)
            VL.Size = UDim2.new(0,50,0,20)
            VL.Font = Enum.Font.Gotham
            VL.Text = tostring(val)
            VL.TextColor3 = Color3.fromRGB(200,200,200)
            VL.TextSize = 14
            VL.TextXAlignment = Enum.TextXAlignment.Right
            
            local Bar = Instance.new("Frame")
            Bar.Parent = SFr
            Bar.BackgroundColor3 = Color3.fromRGB(60,60,60)
            Bar.Position = UDim2.new(0,10,0,35)
            Bar.Size = UDim2.new(1,-20,0,6)
            local BC = Instance.new("UICorner")
            BC.Parent = Bar
            
            local Fill = Instance.new("Frame")
            Fill.Parent = Bar
            Fill.BackgroundColor3 = Color3.fromRGB(0,150,255)
            Fill.Size = UDim2.new((val-min)/(max-min), 0, 1, 0)
            local FC = Instance.new("UICorner")
            FC.Parent = Fill
            
            local Btn = Instance.new("TextButton")
            Btn.Parent = Bar
            Btn.BackgroundTransparency = 1
            Btn.Size = UDim2.new(1,0,1,0)
            Btn.Text = ""
            
            local function Update(input)
                local s = math.clamp((input.Position.X - Bar.AbsolutePosition.X)/Bar.AbsoluteSize.X, 0, 1)
                val = math.floor(min + ((max-min)*s))
                VL.Text = tostring(val)
                CreateTween(Fill, {Size = UDim2.new(s,0,1,0)}, 0.1)
                pcall(callback, val)
            end
            
            Btn.InputBegan:Connect(function(i) 
                if i.UserInputType == Enum.UserInputType.MouseButton1 or i.UserInputType == Enum.UserInputType.Touch then
                    sliding = true
                    Update(i)
                end
            end)
            Btn.InputEnded:Connect(function(i)
                if i.UserInputType == Enum.UserInputType.MouseButton1 or i.UserInputType == Enum.UserInputType.Touch then
                    sliding = false
                end
            end)
            UserInputService.InputChanged:Connect(function(i)
                if sliding and (i.UserInputType == Enum.UserInputType.MouseMovement or i.UserInputType == Enum.UserInputType.Touch) then
                    Update(i)
                end
            end)
        end

        function Tab:Dropdown(text, list, callback)
            local dropped = false
            local DFr = Instance.new("Frame")
            DFr.Parent = Page
            DFr.BackgroundColor3 = Color3.fromRGB(40,40,40)
            DFr.Size = UDim2.new(1,0,0,36)
            DFr.ClipsDescendants = true
            local DC = Instance.new("UICorner")
            DC.Parent = DFr
            
            local DL = Instance.new("TextLabel")
            DL.Parent = DFr
            DL.BackgroundTransparency = 1
            DL.Position = UDim2.new(0,10,0,0)
            DL.Size = UDim2.new(1,-40,0,36)
            DL.Font = Enum.Font.Gotham
            DL.Text = text
            DL.TextColor3 = Color3.fromRGB(255,255,255)
            DL.TextSize = 14
            DL.TextXAlignment = Enum.TextXAlignment.Left
            
            local Arrow = Instance.new("ImageLabel")
            Arrow.Parent = DFr
            Arrow.BackgroundTransparency = 1
            Arrow.Position = UDim2.new(1,-30,0,8)
            Arrow.Size = UDim2.new(0,20,0,20)
            Arrow.Image = "rbxassetid://6031090990"
            
            local Scroll = Instance.new("ScrollingFrame")
            Scroll.Parent = DFr
            Scroll.BackgroundTransparency = 1
            Scroll.Position = UDim2.new(0,0,0,36)
            Scroll.Size = UDim2.new(1,0,0,100)
            Scroll.ScrollBarThickness = 2
            local SL = Instance.new("UIListLayout")
            SL.Parent = Scroll
            SL.Padding = UDim.new(0,2)
            
            local Btn = Instance.new("TextButton")
            Btn.Parent = DFr
            Btn.BackgroundTransparency = 1
            Btn.Size = UDim2.new(1,0,0,36)
            Btn.Text = ""
            
            for _,item in pairs(list) do
                local IB = Instance.new("TextButton")
                IB.Parent = Scroll
                IB.BackgroundColor3 = Color3.fromRGB(35,35,35)
                IB.Size = UDim2.new(1,0,0,25)
                IB.Font = Enum.Font.Gotham
                IB.Text = item
                IB.TextColor3 = Color3.fromRGB(200,200,200)
                IB.TextSize = 13
                IB.MouseButton1Click:Connect(function()
                    DL.Text = text .. " ("..item..")"
                    dropped = false
                    CreateTween(DFr, {Size = UDim2.new(1,0,0,36)}, 0.2)
                    CreateTween(Arrow, {Rotation = 0}, 0.2)
                    pcall(callback, item)
                end)
            end
            
            Btn.MouseButton1Click:Connect(function()
                dropped = not dropped
                if dropped then
                    CreateTween(DFr, {Size = UDim2.new(1,0,0,140)}, 0.2)
                    CreateTween(Arrow, {Rotation = 180}, 0.2)
                else
                    CreateTween(DFr, {Size = UDim2.new(1,0,0,36)}, 0.2)
                    CreateTween(Arrow, {Rotation = 0}, 0.2)
                end
            end)
        end

        function Tab:Textbox(text, ph, callback)
            local TFr = Instance.new("Frame")
            TFr.Parent = Page
            TFr.BackgroundColor3 = Color3.fromRGB(40,40,40)
            TFr.Size = UDim2.new(1,0,0,50)
            local TC = Instance.new("UICorner")
            TC.Parent = TFr
            
            local TL = Instance.new("TextLabel")
            TL.Parent = TFr
            TL.BackgroundTransparency = 1
            TL.Position = UDim2.new(0,10,0,5)
            TL.Size = UDim2.new(1,-20,0,20)
            TL.Font = Enum.Font.Gotham
            TL.Text = text
            TL.TextColor3 = Color3.fromRGB(255,255,255)
            TL.TextSize = 14
            TL.TextXAlignment = Enum.TextXAlignment.Left
            
            local TB = Instance.new("TextBox")
            TB.Parent = TFr
            TB.BackgroundColor3 = Color3.fromRGB(30,30,30)
            TB.Position = UDim2.new(0,10,0,25)
            TB.Size = UDim2.new(1,-20,0,20)
            TB.Font = Enum.Font.Gotham
            TB.PlaceholderText = ph or "..."
            TB.Text = ""
            TB.TextColor3 = Color3.fromRGB(200,200,200)
            TB.TextSize = 12
            local TBC = Instance.new("UICorner")
            TBC.Parent = TB
            
            TB.FocusLost:Connect(function() pcall(callback, TB.Text) end)
        end

        function Tab:Label(text)
            local L = Instance.new("TextLabel")
            L.Parent = Page
            L.BackgroundTransparency = 1
            L.Size = UDim2.new(1,0,0,25)
            L.Font = Enum.Font.Gotham
            L.Text = text
            L.TextColor3 = Color3.fromRGB(150,150,150)
            L.TextSize = 14
            L.TextXAlignment = Enum.TextXAlignment.Center
        end
        
        return Tab
    end

    return Window
end

return Library
